<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Checkout | BeTranslator</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous" />
  
  <link rel="stylesheet" href="style.css" />
  
  <link href="https://fonts.googleapis.com/css2?family=Lora:wght@400;600&display=swap" rel="stylesheet" />
  
  <link rel="shortcut icon" href="favicon.png" type="image/x-icon">
  
  <style>
    /* These styles are kept to override Bootstrap defaults 
      and theme them according to style.css colors.
    */

    /* Use your site's primary color for buttons */
    .btn-primary {
      background-color: #4bc9e8;
      border-color: #4bc9e8;
    }
    .btn-primary:hover {
      background-color: #3ea8c2; /* A slightly darker hover */
      border-color: #3ea8c2;
    }

    /* Style links and active states with your theme color */
    .progress-step.active {
      color: #172e54; /* Your site's dark blue */
      font-weight: 600;
    }
    .progress-step {
      color: #6c757d; /* Muted color for inactive steps */
    }
    .form-check-input:checked {
        background-color: #4bc9e8;
        border-color: #4bc9e8;
    }
    
    /* Ensure credit card fields are hidden initially if not checked */
    #credit-card-fields {
        display: none;
    }
  </style>
</head>

<body>

  <header class="top-bar">
    <div class="container top-bar-content">
      <div class="logo">
        <a href="index.html"><img src="images/retina-translator.png" alt="BeTranslator Logo"></a>
      </div>
      <nav class="navigation">
        <a href="index.html#services">Services</a>
        <a href="index.html#about">About</a>
        <a href="index.html#languages">Languages</a>
        <a href="index.html#contact">Contact</a>
        <a href="checkout.html" style="color: #4bc9e8; font-weight: bold;">Checkout</a>
      </nav>
    </div>
  </header>
  <main style="padding-top: 90px;">
    
    <div class="container my-5">
      <div class="py-3 text-center">
        <h2>Checkout</h2>
      </div>

      <div class="d-flex justify-content-between text-center mb-4 p-3 bg-light rounded shadow-sm">
        <div class="progress-step">Cart</div>
        <div class="progress-step active">Address & Payment</div>
        <div class="progress-step">Review</div>
      </div>

      <div class="row g-5">
        
        <div class="col-md-7">
          
          <form class="needs-validation" id="checkout-form" novalidate>
            
            <h4 class="mb-3">Customer & Shipping Address</h4>
            <div class="row g-3">
              <div class="col-12">
                <label for="fullName" class="form-label">Full name</label>
                <input type="text" class="form-control" id="fullName" placeholder="Haseeb Farooq" required />
                <div class="invalid-feedback">Valid full name is required.</div>
              </div>

              <div class="col-12">
                <label for="email" class="form-label">Email</label>
                <input type="email" class="form-control" id="email" placeholder="haseebfarooq1111@gmail.com" required />
                <div class="invalid-feedback">Please enter a valid email address.</div>
              </div>

              <div class="col-12">
                <label for="phone" class="form-label">Phone</label>
                <input type="tel" class="form-control" id="phone" placeholder="+92307-6719951" required />
                <div class="invalid-feedback">Please enter a valid phone number.</div>
              </div>

              <div class="col-12">
                <label for="address" class="form-label">Address</label>
                <input type="text" class="form-control" id="address" placeholder="152/4 LC LDA" required />
                <div class="invalid-feedback">Please enter your shipping address.</div>
              </div>

              <div class="col-md-5">
                <label for="city" class="form-label">City</label>
                <input type="text" class="form-control" id="city" placeholder="Lahore" required />
                <div class="invalid-feedback">City required.</div>
              </div>

              <div class="col-md-4">
                <label for="country" class="form-label">Country</label>
                <select class="form-select" id="country" required>
                  <option value="">Choose...</option>
                  <option>Pakistan</option>
                  <option>India</option>
                  <option>USA</option>
                  <option>UK</option>
                  <option>Canada</option>
                </select>
                <div class="invalid-feedback">Please select a valid country.</div>
              </div>

              <div class="col-md-3">
                <label for="zip" class="form-label">Postal Code</label>
                <input type="text" class="form-control" id="zip" placeholder="10001" required />
                <div class="invalid-feedback">Zip code required.</div>
              </div>
            </div>

            <hr class="my-4" />

            <div class="form-check">
              <input type="checkbox" class="form-check-input" id="same-address" />
              <label class="form-check-label" for="same-address">Billing address is the same as my shipping address</label>
            </div>

            <hr class="my-4" />

            <h4 class="mb-3">Payment</h4>

            <div class="my-3">
              <div class="form-check">
                <input id="credit" name="paymentMethod" type="radio" class="form-check-input" checked required />
                <label class="form-check-label" for="credit">Credit card</label>
              </div>
              <div class="form-check">
                <input id="cod" name="paymentMethod" type="radio" class="form-check-input" required />
                <label class="form-check-label" for="cod">Cash on Delivery (COD)</label>
              </div>
              <div class="form-check">
                <input id="wallet" name="paymentMethod" type="radio" class="form-check-input" required />
                <label class="form-check-label" for="wallet">Digital Wallet</label>
              </div>
            </div>

            <div class="row gy-3" id="credit-card-fields">
              <div class="col-md-6">
                <label for="cc-name" class="form-label">Name on card</label>
                <input type="text" class="form-control" id="cc-name" placeholder="" />
                <small class="text-muted">Full name as displayed on card</small>
                <div class="invalid-feedback">Name on card is required</div>
              </div>

              <div class="col-md-6">
                <label for="cc-number" class="form-label">Card number</label>
                <input type="text" class="form-control" id="cc-number" placeholder="1111-2222-3333-4444" />
                <div class="invalid-feedback">Credit card number is required</div>
              </div>

              <div class="col-md-3">
                <label for="cc-expiration" class="form-label">Expiry</label>
                <input type="text" class="form-control" id="cc-expiration" placeholder="MM/YY" />
                <div class="invalid-feedback">Expiration date required</div>
              </div>

              <div class="col-md-3">
                <label for="cc-cvv" class="form-label">CVV</label>
                <input type="text" class="form-control" id="cc-cvv" placeholder="123" />
                <div class="invalid-feedback">Security code required</div>
              </div>
            </div>

            <hr class="my-4" />

            <div class="form-check">
              <input type="checkbox" class="form-check-input" id="termsCheck" />
              <label class="form-check-label" for="termsCheck">I agree to the Terms and Conditions</label>
               <div class="invalid-feedback">You must agree before placing order.</div>
            </div>
            
            <button class="w-100 btn btn-primary btn-lg mt-4" type="submit" id="placeOrderBtn" disabled>
              Place Order
            </button>
            
          </form>
        </div>
        <div class="col-md-5">
          
          <div class="position-sticky" style="top: 2rem;">
            
            <div class="card shadow-sm">
              <div class="card-header py-3">
                <h4 class="my-0 fw-normal">Order Summary</h4>
              </div>
              <div class="card-body">
                <ul class="list-group list-group-flush">
                  <li class="list-group-item d-flex justify-content-between align-items-center">
                    <div>
                      <h6 class="my-0">Document Translation</h6>
                      <small class="text-muted">Spanish to English (10 pages)</small>
                    </div>
                    <span class="text-muted">$150.00</span>
                  </li>
                  <li class="list-group-item d-flex justify-content-between align-items-center">
                    <div>
                      <h6 class="my-0">Certified Translation</h6>
                      <small class="text-muted">Birth Certificate</small>
                    </div>
                    <span class="text-muted">$45.00</span>
                  </li>
                  <li class="list-group-item d-flex justify-content-between align-items-center">
                    <span class="text-success">Subtotal</span>
                    <strong>$195.00</strong>
                  </li>
                  <li class="list-group-item d-flex justify-content-between align-items-center">
                    <span>Shipping</span>
                    <strong>$5.00</strong>
                  </li>
                   <li class="list-group-item d-flex justify-content-between align-items-center">
                    <span>Tax (8%)</span>
                    <strong>$16.00</strong>
                  </li>
                  <li class="list-group-item d-flex justify-content-between align-items-center fs-5">
                    <strong>Grand Total</strong>
                    <strong>$216.00</strong>
                  </li>
                </ul>
              </div>
            </div>

            <form class="card p-2 mt-4 shadow-sm">
              <div class="input-group">
                <input type="text" class="form-control" placeholder="Promo code" />
                <button type="submit" class="btn btn-secondary">Apply</button>
              </div>
            </form>
            
          </div>
        </div>
      </div>
    </div>
  </main>

  <footer class="bottom-footer">
    <div class="container footer-content">
      <p>© 2021 Betheme by Muffin group | All Rights Reserved | Powered by WordPress</p>
    </div>
  </footer>
  <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
  
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

  <script>
    $(document).ready(function() {
        // --- Cache jQuery Selectors ---
        const $form = $('#checkout-form');
        const $placeOrderBtn = $('#placeOrderBtn');
        const $termsCheck = $('#termsCheck');
        const $creditCardFields = $('#credit-card-fields');
        const $paymentRadios = $('input[name="paymentMethod"]');
        const $creditRadio = $('#credit');

        // --- Helper Functions ---
        
        // Sets a field to its valid state
        function setValid($field) {
            $field.removeClass('is-invalid').addClass('is-valid');
            $field.siblings('.invalid-feedback').text(''); // Clear error message
        }

        // Sets a field to its invalid state with a message
        function setInvalid($field, message) {
            $field.removeClass('is-valid').addClass('is-invalid');
            $field.siblings('.invalid-feedback').text(message); // Set error message
        }

        // --- Validation Logic Functions ---

        function validateName() {
            const $field = $('#fullName');
            const val = $field.val().trim();
            if (val.length === 0) {
                setInvalid($field, 'Valid full name is required.');
                return false;
            } else if (val.length < 3) {
                setInvalid($field, 'Full name must be at least 3 characters.');
                return false;
            } else {
                setValid($field);
                return true;
            }
        }
        
        function validateEmail() {
            const $field = $('#email');
            const val = $field.val().trim();
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (val.length === 0) {
                setInvalid($field, 'Please enter a valid email address.');
                return false;
            } else if (!emailRegex.test(val)) {
                setInvalid($field, 'Please enter a valid email address (e.g., name@example.com).');
                return false;
            } else {
                setValid($field);
                return true;
            }
        }
        
        function validatePhone() {
            const $field = $('#phone');
            const val = $field.val().trim().replace(/\D/g, ''); // Remove non-digits
            const phoneRegex = /^\d{10,}$/; // At least 10 digits
            if (val.length === 0) {
                setInvalid($field, 'Please enter a valid phone number.');
                return false;
            } else if (!phoneRegex.test(val)) {
                setInvalid($field, 'Phone must be at least 10 digits.');
                return false;
            } else {
                setValid($field);
                return true;
            }
        }

        // Generic function for simple required fields
        function validateRequired($field, msg) {
            const val = $field.val().trim();
            if (val === "" || val === null) {
                setInvalid($field, msg);
                return false;
            } else {
                setValid($field);
                return true;
            }
        }

        function validateZip() {
            const $field = $('#zip');
            const val = $field.val().trim();
            const zipRegex = /^\d{4,6}$/; // 4-6 digits
             if (val.length === 0) {
                setInvalid($field, 'Zip code required.');
                return false;
            } else if (!zipRegex.test(val)) {
                setInvalid($field, 'Postal code must be 4-6 digits.');
                return false;
            } else {
                setValid($field);
                return true;
            }
        }
        
        function validateCardFields() {
            let isCardValid = true;
            // Only validate if Credit Card is checked
            if ($creditRadio.is(':checked')) {
                if (!validateRequired($('#cc-name'), 'Name on card is required')) isCardValid = false;
                
                // Card number: simple check for 15-16 digits
                const $ccNum = $('#cc-number');
                const ccNumVal = $ccNum.val().replace(/\D/g, ''); // Remove spaces/dashes
                if (ccNumVal.length < 15 || ccNumVal.length > 16) {
                    setInvalid($ccNum, 'Must be a valid 15-16 digit card number.');
                    isCardValid = false;
                } else {
                    setValid($ccNum);
                }

                // Expiry: MM/YY
                const $ccExp = $('#cc-expiration');
                const expRegex = /^(0[1-9]|1[0-2])\/\d{2}$/;
                if (!expRegex.test($ccExp.val().trim())) {
                    setInvalid($ccExp, 'Must be in MM/YY format.');
                    isCardValid = false;
                } else {
                    setValid($ccExp);
                }
                
                // CVV: 3-4 digits
                const $ccCvv = $('#cc-cvv');
                const cvvRegex = /^\d{3,4}$/;
                if (!cvvRegex.test($ccCvv.val().trim())) {
                    setInvalid($ccCvv, 'Must be 3 or 4 digits.');
                    isCardValid = false;
                } else {
                    setValid($ccCvv);
                }
            }
            return isCardValid;
        }


        // --- Event Handlers ---
        
        // 1. Toggle "Place Order" button based on Terms checkbox
        $termsCheck.on('change', function() {
            $placeOrderBtn.prop('disabled', !this.checked);
            // Also validate this field on change
            if(this.checked) {
                $termsCheck.removeClass('is-invalid');
                $termsCheck.siblings('.invalid-feedback').text('');
            } else {
                setInvalid($termsCheck, 'You must agree before placing order.');
            }
        });

        // 2. Toggle Payment Fields display and 'required' status
        $paymentRadios.on('change', function() {
            if ($creditRadio.is(':checked')) {
                $creditCardFields.slideDown();
                // Add required attribute for validation
                $creditCardFields.find('input').prop('required', true);
            } else {
                $creditCardFields.slideUp();
                // Remove required and any validation states
                $creditCardFields.find('input').prop('required', false)
                    .removeClass('is-valid is-invalid')
                    .siblings('.invalid-feedback').text('');
            }
        });
        
        // 3. Live Validation (on blur) to give immediate feedback
        $('#fullName').on('blur', validateName);
        $('#email').on('blur', validateEmail);
        $('#phone').on('blur', validatePhone);
        $('#address').on('blur', () => validateRequired($('#address'), 'Please enter your shipping address.'));
        $('#city').on('blur', () => validateRequired($('#city'), 'City required.'));
        $('#country').on('blur', () => validateRequired($('#country'), 'Please select a valid country.'));
        $('#zip').on('blur', validateZip);
        
        // Live validation for card fields (only if they are visible)
        $creditCardFields.on('blur', 'input', validateCardFields);


        // 4. Main Form Submission Handler
        $form.on('submit', function(event) {
            // Run all validations one last time
            let isFormValid = true;
            
            // We run them all individually to show all errors, not just the first one
            if (!validateName()) isFormValid = false;
            if (!validateEmail()) isFormValid = false;
            if (!validatePhone()) isFormValid = false;
            if (!validateRequired($('#address'), 'Please enter your shipping address.')) isFormValid = false;
            if (!validateRequired($('#city'), 'City required.')) isFormValid = false;
            if (!validateRequired($('#country'), 'Please select a valid country.')) isFormValid = false;
            if (!validateZip()) isFormValid = false;
            if (!validateCardFields()) isFormValid = false; 
            
            // Final check for terms
            if (!$termsCheck.is(':checked')) {
                setInvalid($termsCheck, 'You must agree before placing order.');
                isFormValid = false;
            } else {
                $termsCheck.removeClass('is-invalid'); // Clear error if checked
            }

            if (!isFormValid) {
                event.preventDefault(); // Stop submission
                
                // Find first error and scroll to it
                const $firstError = $form.find('.is-invalid').first();
                if ($firstError.length > 0) {
                    $('html, body').animate({
                        scrollTop: $firstError.offset().top - 100 // -100px for sticky header
                    }, 500);
                }
            } else {
                // Form is valid! 
                // For demonstration, we'll just alert and prevent submission.
                // In a real app, you would remove the next line to let the form submit.
                event.preventDefault(); 
                alert('Form is valid and would be submitted!');
            }
        });
        
        // --- Initial Page Setup ---
        
        // Trigger change on payment radios to set initial state
        $paymentRadios.trigger('change');
        
    });
  </script>

</body>
</html>